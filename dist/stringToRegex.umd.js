!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.stringToRegex=t()}(this,function(){"use strict";var e=function(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")},t=function(e){return e.replace(/([=!:$/()])/g,"\\$1")},i=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g"),n=function(e){return Array.isArray(e)?e:Array.from(e)},r={defaultDelimiter:"/",delimiters:"./"},o={strict:!1,delimiter:"/",delimiters:"./",end:!0,endsWith:[]};return function(l,a,f){return function(t,i){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,r=!1!==n.end,l=e(n.delimiter),a=[].concat(n.endsWith).map(e).concat("$").join("|"),f="",s=!1,d=0;d<t.length;d++){var u=t[d];if("string"==typeof u)f+=e(u),s=d===t.length-1&&n.delimiters.indexOf(u[u.length-1])>-1;else{var p=e(u.prefix),c=u.repeat?"(?:"+u.pattern+")(?:"+p+"(?:"+u.pattern+"))*":u.pattern;i&&i.push(u),u.optional?u.partial?f+=p+"("+c+")?":f+="(?:"+p+"("+c+"))?":f+=p+"("+c+")"}}return r?(n.strict||(f+="(?:"+l+")?"),f+="$"===a?"$":"(?="+a+")"):(n.strict||(f+="(?:"+l+"(?="+a+"))?"),s||(f+="(?="+l+"|"+a+")")),new RegExp("^"+f,function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).sensitive?"":"i"}(n))}(function(o){for(var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,a=[],f=0,s=0,d="",u=!1,p=void 0;p=i.exec(o);){var c=n(p),g=c[0],h=c[1],m=c[2],v=c[3],x=c[4],y=c[5],$=(c.slice(6),p.index);if(d+=o.slice(s,$),s=$+g.length,h)d+=h[1],u=!0;else{var j="",w=o[s];if(!u&&d.length){var A=d.length-1;l.delimiters.indexOf(d[A])>-1&&(j=d[A],d=d.slice(0,A))}d&&(a.push(d),d="",u=!1);var R=""!==j&&void 0!==w&&w!==j,b="+"===y||"*"===y,D="?"===y||"*"===y,E=j||l.defaultDelimiter,O=v||x;a.push({name:m||f++,prefix:j,delimiter:E,optional:D,repeat:b,partial:R,pattern:O?t(O):"[^"+e(E)+"]+?"})}}return(d||s<o.length)&&a.push(d+o.substr(s)),a}(l,f),a,f)}});
